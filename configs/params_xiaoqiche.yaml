# Configuration for 小汽车 (Small Car) Dataset
# Stereo VO with Pre-computed Depth Maps
# Note: Depth map is at 0.25x scale (1008x759 vs 4032x3036)

initial:
    location: [0, 0, 0]
    orientation: [[1, 0, 0], [0, 1, 0], [0, 0, 1]]
    inlierRatio: 0.5

    # Camera intrinsics from K.txt (rectified intrinsics for 4032x3036 images)
    intrinsic_left: [[3370.2686745, 0.0, 2016.095913],
                     [0.0, 3369.0298780000003, 1553.7248455],
                     [0.0, 0.0, 1.0]]
    intrinsic_right: [[3370.2686745, 0.0, 2016.095913],
                      [0.0, 3369.0298780000003, 1553.7248455],
                      [0.0, 0.0, 1.0]]

    # Extrinsic: baseline ~0.201m (from K.txt)
    extrinsic: [[1.0, 0.0, 0.0, -0.20116963017260622],
                [0.0, 1.0, 0.0, 0.0],
                [0.0, 0.0, 1.0, 0.0],
                [0.0, 0.0, 0.0, 1.0]]

output:
    path: './saved_data/xiaoqiche'

dataset:
    name: 'Project'
    path: 'C:\workspace\stereo_vo_reconstruction\小汽车'

geometry:
    # Depth map parameters
    depth_min: 0.3       # Minimum valid depth in meters
    depth_max: 50.0      # Maximum valid depth in meters

    detection:
        method: 'SIFT'   # 'SIFT' or 'ARUCO' - use SIFT for general scenes

    featureMatcher:
        method: 'FlannMatcher'
        configs:
            indexParams:
                algorithm: 0   # FLANN_INDEX_KDTREE = 0
                trees: 5
            searchParams:
                checks: 50
            K: 2
            maxRatio: 0.8

    epipolarGeometry:
        numTrials: 5
        inlierRatio: 0.5
        method: 8        # cv2.RANSAC = 8
        probability: 0.9999
        threshold: 1.0

    triangulation:
        minDistThresh: 0.3
        maxRadius: 50
        repErrThresh: 1.0

    pnpSolver:
        method: 'P3P'
        numTrials: 3
        deltaT: 2.0        # Max translation per frame (meters)
        minRatio: 0.3      # Min inlier ratio
        iterationsCount: 2000
        reprojectionError: 2.0
        confidence: 0.9999

    lsqsolver:
        enable: False      # Set True for more accurate but slower optimization

    bundleAdjustment:
        enable: False

debug:
    my_draw_matches: False  # Set True to visualize feature matches
    plotting:
        features: False
        featureMatches: False
    logging:
        inliersFilterRANSAC: False
